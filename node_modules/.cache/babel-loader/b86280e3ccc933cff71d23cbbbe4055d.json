{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/GitHub/deepfake-demo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/mac/Documents/GitHub/deepfake-demo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import studio from'@theatre/studio';import{types}from'@theatre/core';import{useState,useEffect}from'react';import Stage from'../components/playground-stage';import{initialConfig}from'../constants';import ControlPanel from'../components/control-panel';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Playground(_ref){var project=_ref.project,sheet=_ref.sheet,setAnimateJSON=_ref.setAnimateJSON,animateJSON=_ref.animateJSON;studio.ui.restore();project.ready.then(function(){return sheet.sequence.pause();});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),storedData=_useState2[0],setStoredData=_useState2[1];// get `element` data which stored in local-storage\nuseEffect(function(){var elements=localStorage.getItem('theatre-data');if(elements){setStoredData(JSON.parse(elements));}},[]);// render 內容改全部用 config 處理\nuseEffect(function(){if(storedData.length>0){//render font control menu\nstoredData.filter(function(item){return item.type==='font';}).forEach(function(item){var menuConfig=sheet.object(item.id,_objectSpread(_objectSpread({},initialConfig.FONT),{},{content:types.string(\"\".concat(item.content))}));var element=document.getElementById(item.id);menuConfig.onValuesChange(function(newValue){element.style.left=newValue.position.x+'%';element.style.top=newValue.position.y+'%';element.style.background=newValue.bgColor;element.style.color=newValue.font.color;element.style.opacity=newValue.opacity;element.style.padding=newValue.padding+'px';element.style.display=newValue.visible?'block':'none';element.style.width=newValue.size.width+'px';element.style.fontSize=newValue.font.size+'px';element.style.borderRadius=newValue.border.radius+'%';element.style.border=\"\".concat(newValue.border.size,\"px solid \").concat(newValue.border.color);element.textContent=newValue.content;element.style.fontWeight=newValue.font.weight;element.style.letterSpacing=newValue.font.spacing+'px';element.style.lineHeight=newValue.lineHeight+'px';element.style.textAlign=newValue.textAlign;element.style.zIndex=newValue.zIndex;element.style.transform=\"scale(\".concat(newValue.scale,\")\");});});storedData.filter(function(item){return item.type==='image';}).forEach(function(item){var menuConfig=sheet.object(item.id,_objectSpread(_objectSpread({},initialConfig.IMAGE),{},{url:types.string(\"\".concat(item.url))}));var element=document.getElementById(item.id);menuConfig.onValuesChange(function(newValue){element.style.left=newValue.position.x+'%';element.style.top=newValue.position.y+'%';element.style.opacity=newValue.opacity;element.style.display=newValue.visible?'block':'none';element.style.width=newValue.size.width+'px';element.style.height=newValue.size.height+'px';element.style.borderRadius=newValue.border.radius+'%';element.style.border=\"\".concat(newValue.border.size,\"px solid \").concat(newValue.border.color);element.style.backgroundImage=\"url(\".concat(newValue.url,\")\");});});}// const obj = sheet.object('key', {\n//   light: types.stringLiteral('r', { r: 'Red', g: 'Green' }),\n// });\n},[storedData]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ControlPanel,{sheet:sheet,setAnimateJSON:setAnimateJSON,animateJSON:animateJSON}),/*#__PURE__*/_jsx(Stage,{storedData:storedData,sheet:sheet})]});}","map":{"version":3,"names":["studio","types","useState","useEffect","Stage","initialConfig","ControlPanel","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Playground","_ref","project","sheet","setAnimateJSON","animateJSON","ui","restore","ready","then","sequence","pause","_useState","_useState2","_slicedToArray","storedData","setStoredData","elements","localStorage","getItem","JSON","parse","length","filter","item","type","forEach","menuConfig","object","id","_objectSpread","FONT","content","string","concat","element","document","getElementById","onValuesChange","newValue","style","left","position","x","top","y","background","bgColor","color","font","opacity","padding","display","visible","width","size","fontSize","borderRadius","border","radius","textContent","fontWeight","weight","letterSpacing","spacing","lineHeight","textAlign","zIndex","transform","scale","IMAGE","url","height","backgroundImage","children"],"sources":["/Users/mac/Documents/GitHub/deepfake-demo/src/page/playground.js"],"sourcesContent":["import studio from '@theatre/studio';\nimport { types } from '@theatre/core';\nimport { useState, useEffect } from 'react';\nimport Stage from '../components/playground-stage';\nimport { initialConfig } from '../constants';\nimport ControlPanel from '../components/control-panel';\n\nexport default function Playground({\n  project,\n  sheet,\n  setAnimateJSON,\n  animateJSON,\n}) {\n  studio.ui.restore();\n  project.ready.then(() => sheet.sequence.pause());\n\n  const [storedData, setStoredData] = useState([]);\n\n  // get `element` data which stored in local-storage\n  useEffect(() => {\n    const elements = localStorage.getItem('theatre-data');\n    if (elements) {\n      setStoredData(JSON.parse(elements));\n    }\n  }, []);\n\n  // render 內容改全部用 config 處理\n  useEffect(() => {\n    if (storedData.length > 0) {\n      //render font control menu\n      storedData\n        .filter((item) => item.type === 'font')\n        .forEach((item) => {\n          const menuConfig = sheet.object(item.id, {\n            ...initialConfig.FONT,\n            content: types.string(`${item.content}`),\n          });\n\n          const element = document.getElementById(item.id);\n\n          menuConfig.onValuesChange((newValue) => {\n            element.style.left = newValue.position.x + '%';\n            element.style.top = newValue.position.y + '%';\n            element.style.background = newValue.bgColor;\n            element.style.color = newValue.font.color;\n            element.style.opacity = newValue.opacity;\n            element.style.padding = newValue.padding + 'px';\n            element.style.display = newValue.visible ? 'block' : 'none';\n            element.style.width = newValue.size.width + 'px';\n            element.style.fontSize = newValue.font.size + 'px';\n            element.style.borderRadius = newValue.border.radius + '%';\n            element.style.border = `${newValue.border.size}px solid ${newValue.border.color}`;\n            element.textContent = newValue.content;\n            element.style.fontWeight = newValue.font.weight;\n            element.style.letterSpacing = newValue.font.spacing + 'px';\n            element.style.lineHeight = newValue.lineHeight + 'px';\n            element.style.textAlign = newValue.textAlign;\n            element.style.zIndex = newValue.zIndex;\n            element.style.transform = `scale(${newValue.scale})`;\n          });\n        });\n\n      storedData\n        .filter((item) => item.type === 'image')\n        .forEach((item) => {\n          const menuConfig = sheet.object(item.id, {\n            ...initialConfig.IMAGE,\n            url: types.string(`${item.url}`),\n          });\n          const element = document.getElementById(item.id);\n\n          menuConfig.onValuesChange((newValue) => {\n            element.style.left = newValue.position.x + '%';\n            element.style.top = newValue.position.y + '%';\n            element.style.opacity = newValue.opacity;\n            element.style.display = newValue.visible ? 'block' : 'none';\n            element.style.width = newValue.size.width + 'px';\n            element.style.height = newValue.size.height + 'px';\n            element.style.borderRadius = newValue.border.radius + '%';\n            element.style.border = `${newValue.border.size}px solid ${newValue.border.color}`;\n            element.style.backgroundImage = `url(${newValue.url})`;\n          });\n        });\n    }\n\n    // const obj = sheet.object('key', {\n    //   light: types.stringLiteral('r', { r: 'Red', g: 'Green' }),\n    // });\n  }, [storedData]);\n\n  return (\n    <>\n      <ControlPanel\n        sheet={sheet}\n        setAnimateJSON={setAnimateJSON}\n        animateJSON={animateJSON}\n      />\n      <Stage storedData={storedData} sheet={sheet} />\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}