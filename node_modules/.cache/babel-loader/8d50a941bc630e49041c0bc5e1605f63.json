{"ast":null,"code":"import{useEffect,useRef}from'react';var noop=function noop(){};function createCursorLock(cursor){var el=document.createElement('div');el.style.cssText=\"\\n    position: fixed;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n    z-index: 9999999;\";el.style.cursor=cursor;document.body.appendChild(el);var relinquish=function relinquish(){document.body.removeChild(el);};return relinquish;}export default function useDrag(target,opts){var optsRef=useRef(opts);optsRef.current=opts;var modeRef=useRef('notDragging');var stateRef=useRef({dragHappened:false,startPos:{x:0,y:0}});useEffect(function(){if(!target)return;var getDistances=function getDistances(event){var startPos=stateRef.current.startPos;return[event.screenX-startPos.x,event.screenY-startPos.y];};var relinquishCursorLock=noop;var dragHandler=function dragHandler(event){if(!stateRef.current.dragHappened&&optsRef.current.lockCursorTo){relinquishCursorLock=createCursorLock(optsRef.current.lockCursorTo);}if(!stateRef.current.dragHappened)stateRef.current.dragHappened=true;modeRef.current='dragging';var deltas=getDistances(event);optsRef.current.onDrag(deltas[0],deltas[1],event);};var dragEndHandler=function dragEndHandler(){removeDragListeners();modeRef.current='notDragging';optsRef.current.onDragEnd&&optsRef.current.onDragEnd(stateRef.current.dragHappened);relinquishCursorLock();relinquishCursorLock=noop;};var addDragListeners=function addDragListeners(){document.addEventListener('mousemove',dragHandler);document.addEventListener('mouseup',dragEndHandler);};var removeDragListeners=function removeDragListeners(){document.removeEventListener('mousemove',dragHandler);document.removeEventListener('mouseup',dragEndHandler);};var preventUnwantedClick=function preventUnwantedClick(event){if(optsRef.current.disabled)return;if(stateRef.current.dragHappened){if(!optsRef.current.dontBlockMouseDown&&modeRef.current!=='notDragging'){event.stopPropagation();event.preventDefault();}stateRef.current.dragHappened=false;}};var dragStartHandler=function dragStartHandler(event){var opts=optsRef.current;if(opts.disabled===true)return;if(event.button!==0)return;var resultOfStart=opts.onDragStart&&opts.onDragStart(event);if(resultOfStart===false)return;if(!opts.dontBlockMouseDown){event.stopPropagation();event.preventDefault();}modeRef.current='dragStartCalled';var screenX=event.screenX,screenY=event.screenY;stateRef.current.startPos={x:screenX,y:screenY};stateRef.current.dragHappened=false;addDragListeners();};var onMouseDown=function onMouseDown(e){dragStartHandler(e);};target.addEventListener('mousedown',onMouseDown);target.addEventListener('click',preventUnwantedClick);return function(){removeDragListeners();target.removeEventListener('mousedown',onMouseDown);target.removeEventListener('click',preventUnwantedClick);relinquishCursorLock();if(modeRef.current!=='notDragging'){optsRef.current.onDragEnd&&optsRef.current.onDragEnd(modeRef.current==='dragging');}modeRef.current='notDragging';};},[target]);}","map":{"version":3,"names":["useEffect","useRef","noop","createCursorLock","cursor","el","document","createElement","style","cssText","body","appendChild","relinquish","removeChild","useDrag","target","opts","optsRef","current","modeRef","stateRef","dragHappened","startPos","x","y","getDistances","event","screenX","screenY","relinquishCursorLock","dragHandler","lockCursorTo","deltas","onDrag","dragEndHandler","removeDragListeners","onDragEnd","addDragListeners","addEventListener","removeEventListener","preventUnwantedClick","disabled","dontBlockMouseDown","stopPropagation","preventDefault","dragStartHandler","button","resultOfStart","onDragStart","onMouseDown","e"],"sources":["/Users/mac/Documents/GitHub/deepfake-demo/src/hooks/use-drag.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\nconst noop = () => {};\n\nfunction createCursorLock(cursor) {\n  const el = document.createElement('div');\n  el.style.cssText = `\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 9999999;`;\n\n  el.style.cursor = cursor;\n  document.body.appendChild(el);\n  const relinquish = () => {\n    document.body.removeChild(el);\n  };\n\n  return relinquish;\n}\n\nexport default function useDrag(target, opts) {\n  const optsRef = useRef(opts);\n  optsRef.current = opts;\n\n  const modeRef = useRef('notDragging');\n\n  const stateRef = useRef({ dragHappened: false, startPos: { x: 0, y: 0 } });\n\n  useEffect(() => {\n    if (!target) return;\n\n    const getDistances = (event) => {\n      const { startPos } = stateRef.current;\n      return [event.screenX - startPos.x, event.screenY - startPos.y];\n    };\n\n    let relinquishCursorLock = noop;\n\n    const dragHandler = (event) => {\n      if (!stateRef.current.dragHappened && optsRef.current.lockCursorTo) {\n        relinquishCursorLock = createCursorLock(optsRef.current.lockCursorTo);\n      }\n      if (!stateRef.current.dragHappened) stateRef.current.dragHappened = true;\n      modeRef.current = 'dragging';\n\n      const deltas = getDistances(event);\n      optsRef.current.onDrag(deltas[0], deltas[1], event);\n    };\n\n    const dragEndHandler = () => {\n      removeDragListeners();\n      modeRef.current = 'notDragging';\n\n      optsRef.current.onDragEnd &&\n        optsRef.current.onDragEnd(stateRef.current.dragHappened);\n      relinquishCursorLock();\n      relinquishCursorLock = noop;\n    };\n\n    const addDragListeners = () => {\n      document.addEventListener('mousemove', dragHandler);\n      document.addEventListener('mouseup', dragEndHandler);\n    };\n\n    const removeDragListeners = () => {\n      document.removeEventListener('mousemove', dragHandler);\n      document.removeEventListener('mouseup', dragEndHandler);\n    };\n\n    const preventUnwantedClick = (event) => {\n      if (optsRef.current.disabled) return;\n      if (stateRef.current.dragHappened) {\n        if (\n          !optsRef.current.dontBlockMouseDown &&\n          modeRef.current !== 'notDragging'\n        ) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n        stateRef.current.dragHappened = false;\n      }\n    };\n\n    const dragStartHandler = (event) => {\n      const opts = optsRef.current;\n      if (opts.disabled === true) return;\n\n      if (event.button !== 0) return;\n      const resultOfStart = opts.onDragStart && opts.onDragStart(event);\n\n      if (resultOfStart === false) return;\n\n      if (!opts.dontBlockMouseDown) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n\n      modeRef.current = 'dragStartCalled';\n\n      const { screenX, screenY } = event;\n      stateRef.current.startPos = { x: screenX, y: screenY };\n      stateRef.current.dragHappened = false;\n\n      addDragListeners();\n    };\n\n    const onMouseDown = (e) => {\n      dragStartHandler(e);\n    };\n\n    target.addEventListener('mousedown', onMouseDown);\n    target.addEventListener('click', preventUnwantedClick);\n\n    return () => {\n      removeDragListeners();\n      target.removeEventListener('mousedown', onMouseDown);\n      target.removeEventListener('click', preventUnwantedClick);\n      relinquishCursorLock();\n\n      if (modeRef.current !== 'notDragging') {\n        optsRef.current.onDragEnd &&\n          optsRef.current.onDragEnd(modeRef.current === 'dragging');\n      }\n      modeRef.current = 'notDragging';\n    };\n  }, [target]);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}