{"ast":null,"code":"import { initialConfig } from '../constants/index';\nimport { types } from '@theatre/core';\nimport studio from '@theatre/studio';\nconst isEmptyObject = obj => {\n  return Object.keys(obj).length === 0;\n};\n\n// 1. 我需要讓 content 更動可以反映在元件上\n// 2. 我需要讓 local-storage 記得這個內容\n// ?? 可能 objectJSON 就不紀錄內容了？？會有影響嗎？？\n\n// 這是只 render object\nconst renderFontObject = function () {\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let sheet = arguments.length > 1 ? arguments[1] : undefined;\n  data.filter(item => item.type === 'FONT').forEach(item => {\n    const object = sheet.object(item.id, {\n      ...initialConfig.FONT,\n      content: types.string(`${item.content}`)\n    });\n    const element = document.getElementById(item.id);\n    element.addEventListener('click', () => {\n      studio.setSelection([object]);\n    });\n\n    // const updateTextContent = (newContent) => {\n    //   item.content = newContent; // Update item.content with the new value\n    //   element.textContent = newContent; // Update the text content of the element\n    //   console.log('執行 updateTextContent');\n    //   //目前 animate json 會改，但 item.json 沒有改\n    // };\n\n    object.onValuesChange(newValue => {\n      element.textContent = newValue.content;\n      element.style.cssText = `\n          left: ${newValue.position.x}%;\n          top: ${newValue.position.y}%;\n          background: ${newValue.bgColor};\n          color: ${newValue.font.color};\n          opacity: ${newValue.opacity};\n          padding: ${newValue.padding}px;\n          display: ${newValue.visible ? 'block' : 'none'};\n          width: ${newValue.size.width}px;\n          font-size: ${newValue.font.size}px;\n          border-radius: ${newValue.border.radius}px;\n          border: ${newValue.border.size}px solid ${newValue.border.color};\n          font-weight: ${newValue.font.weight};\n          letter-spacing: ${newValue.font.spacing}px;\n          line-height: ${newValue.lineHeight}px;\n          text-align: ${newValue.textAlign};\n          z-index: ${newValue.zIndex};\n          transform: scale(${newValue.scale});\n        `;\n    });\n  });\n};\nconst renderImageObject = function () {\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let sheet = arguments.length > 1 ? arguments[1] : undefined;\n  data.filter(item => item.type === 'IMAGE').forEach(item => {\n    const object = sheet.object(item.id, {\n      ...initialConfig.IMAGE,\n      url: types.string(`${item.url}`)\n    });\n    const element = document.getElementById(item.id);\n    element.addEventListener('click', () => {\n      studio.setSelection([object]);\n    });\n    object.onValuesChange(newValue => {\n      element.style.cssText = `\n          left: ${newValue.position.x}%;\n          top: ${newValue.position.y}%;\n          width: ${newValue.size.width}px;\n          height: ${newValue.size.height}px;\n          border-radius: ${newValue.border.radius}%;\n          border: ${newValue.border.size}px solid ${newValue.border.color};\n          background: ${newValue.bgColor};\n          opacity: ${newValue.opacity};\n          display: ${newValue.visible ? 'block' : 'none'};\n          background-image = url(${newValue.url});\n          transform: scale(${newValue.scale});\n          z-index: ${newValue.zIndex};\n        `;\n    });\n  });\n};\nconst renderBgObject = function () {\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let sheet = arguments.length > 1 ? arguments[1] : undefined;\n  data.filter(item => item.type === 'BACKGROUND').forEach(item => {\n    const object = sheet.object(item.id, {\n      ...initialConfig.BACKGROUND,\n      url: types.string(`${item.url}`)\n    });\n    const element = document.getElementById(item.id);\n    element.addEventListener('click', () => {\n      studio.setSelection([object]);\n    });\n    object.onValuesChange(newValue => {\n      element.style.cssText = `\n          left: ${newValue.position.x}%;\n          top: ${newValue.position.y}%;\n          border-radius: ${newValue.border.radius}%;\n          border: ${newValue.border.size}px solid ${newValue.border.color};\n          background: ${newValue.bgColor};\n          opacity: ${newValue.opacity};\n          display: ${newValue.visible ? 'block' : 'none'};\n          background-image = url(${newValue.url});\n          transform: scale(${newValue.scale});\n          z-index: ${newValue.zIndex};\n        `;\n    });\n  });\n};\nexport { isEmptyObject, renderFontObject, renderImageObject, renderBgObject };","map":{"version":3,"names":["initialConfig","types","studio","isEmptyObject","obj","Object","keys","length","renderFontObject","data","arguments","undefined","sheet","filter","item","type","forEach","object","id","FONT","content","string","element","document","getElementById","addEventListener","setSelection","onValuesChange","newValue","textContent","style","cssText","position","x","y","bgColor","font","color","opacity","padding","visible","size","width","border","radius","weight","spacing","lineHeight","textAlign","zIndex","scale","renderImageObject","IMAGE","url","height","renderBgObject","BACKGROUND"],"sources":["/Users/mac/Documents/GitHub/deepfake-demo/src/utils/index.js"],"sourcesContent":["import { initialConfig } from '../constants/index';\nimport { types } from '@theatre/core';\nimport studio from '@theatre/studio';\n\nconst isEmptyObject = (obj) => {\n  return Object.keys(obj).length === 0;\n};\n\n// 1. 我需要讓 content 更動可以反映在元件上\n// 2. 我需要讓 local-storage 記得這個內容\n// ?? 可能 objectJSON 就不紀錄內容了？？會有影響嗎？？\n\n// 這是只 render object\nconst renderFontObject = (data = [], sheet) => {\n  data\n    .filter((item) => item.type === 'FONT')\n    .forEach((item) => {\n      const object = sheet.object(item.id, {\n        ...initialConfig.FONT,\n        content: types.string(`${item.content}`),\n      });\n\n      const element = document.getElementById(item.id);\n\n      element.addEventListener('click', () => {\n        studio.setSelection([object]);\n      });\n\n      // const updateTextContent = (newContent) => {\n      //   item.content = newContent; // Update item.content with the new value\n      //   element.textContent = newContent; // Update the text content of the element\n      //   console.log('執行 updateTextContent');\n      //   //目前 animate json 會改，但 item.json 沒有改\n      // };\n\n      object.onValuesChange((newValue) => {\n        element.textContent = newValue.content;\n\n        element.style.cssText = `\n          left: ${newValue.position.x}%;\n          top: ${newValue.position.y}%;\n          background: ${newValue.bgColor};\n          color: ${newValue.font.color};\n          opacity: ${newValue.opacity};\n          padding: ${newValue.padding}px;\n          display: ${newValue.visible ? 'block' : 'none'};\n          width: ${newValue.size.width}px;\n          font-size: ${newValue.font.size}px;\n          border-radius: ${newValue.border.radius}px;\n          border: ${newValue.border.size}px solid ${newValue.border.color};\n          font-weight: ${newValue.font.weight};\n          letter-spacing: ${newValue.font.spacing}px;\n          line-height: ${newValue.lineHeight}px;\n          text-align: ${newValue.textAlign};\n          z-index: ${newValue.zIndex};\n          transform: scale(${newValue.scale});\n        `;\n      });\n    });\n};\n\nconst renderImageObject = (data = [], sheet) => {\n  data\n    .filter((item) => item.type === 'IMAGE')\n    .forEach((item) => {\n      const object = sheet.object(item.id, {\n        ...initialConfig.IMAGE,\n        url: types.string(`${item.url}`),\n      });\n\n      const element = document.getElementById(item.id);\n\n      element.addEventListener('click', () => {\n        studio.setSelection([object]);\n      });\n\n      object.onValuesChange((newValue) => {\n        element.style.cssText = `\n          left: ${newValue.position.x}%;\n          top: ${newValue.position.y}%;\n          width: ${newValue.size.width}px;\n          height: ${newValue.size.height}px;\n          border-radius: ${newValue.border.radius}%;\n          border: ${newValue.border.size}px solid ${newValue.border.color};\n          background: ${newValue.bgColor};\n          opacity: ${newValue.opacity};\n          display: ${newValue.visible ? 'block' : 'none'};\n          background-image = url(${newValue.url});\n          transform: scale(${newValue.scale});\n          z-index: ${newValue.zIndex};\n        `;\n      });\n    });\n};\n\nconst renderBgObject = (data = [], sheet) => {\n  data\n    .filter((item) => item.type === 'BACKGROUND')\n    .forEach((item) => {\n      const object = sheet.object(item.id, {\n        ...initialConfig.BACKGROUND,\n        url: types.string(`${item.url}`),\n      });\n\n      const element = document.getElementById(item.id);\n\n      element.addEventListener('click', () => {\n        studio.setSelection([object]);\n      });\n\n      object.onValuesChange((newValue) => {\n        element.style.cssText = `\n          left: ${newValue.position.x}%;\n          top: ${newValue.position.y}%;\n          border-radius: ${newValue.border.radius}%;\n          border: ${newValue.border.size}px solid ${newValue.border.color};\n          background: ${newValue.bgColor};\n          opacity: ${newValue.opacity};\n          display: ${newValue.visible ? 'block' : 'none'};\n          background-image = url(${newValue.url});\n          transform: scale(${newValue.scale});\n          z-index: ${newValue.zIndex};\n        `;\n      });\n    });\n};\n\nexport { isEmptyObject, renderFontObject, renderImageObject, renderBgObject };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}