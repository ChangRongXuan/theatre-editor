{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/GitHub/deepfake-demo/src/page/no-scroll.js\",\n  _s = $RefreshSig$();\nimport studio from '@theatre/studio';\nimport { getProject, val } from '@theatre/core';\nimport { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport TheatreElements from '../components/theatre-elements';\nimport { useInView } from 'react-intersection-observer';\n\n// import { getProject, types } from '@theatre/core';\nimport projectState from '../json/state.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst defaultViewportHeight = '100vh';\nconst ViewBox = styled.div`\n  position: relative;\n  width: 100%;\n  height: 300vh;\n  min-height: 100vh;\n  outline: 3px solid blue;\n`;\n_c = ViewBox;\nconst TheatreContainer = styled.div`\n  width: 100%;\n  height: 100vh;\n  outline: 1px solid red;\n  overflow-y: auto;\n  padding-right: 15px; //to hide scroll-bar\n  position: sticky;\n  top: 0;\n  left: 0;\n`;\n\n// 下面參考 scrollable-video ---------------------------------\n\n//代表滑到這個框框的最上方\n_c2 = TheatreContainer;\nconst PositionStarter = styled.div`\n  width: 0;\n  height: 0;\n  opacity: 0;\n`;\n_c3 = PositionStarter;\nconst PositionFinisher = styled.div`\n  width: 0;\n  height: 0;\n  opacity: 0;\n`;\n_c4 = PositionFinisher;\nconst Other = styled.div`\n  width: 100%;\n  height: 100vh;\n`;\n_c5 = Other;\nexport default function ScrollDemo() {\n  _s();\n  studio.initialize();\n  const project = getProject('deepfake demo', {\n    state: projectState\n  });\n  const sheet = project.sheet('Scene', 'default');\n  studio.ui.hide();\n  project.ready.then(() => sheet.sequence.pause);\n  const starterRef = useRef(null);\n  const finisherRef = useRef(null);\n  const theaterRef = useRef(null);\n  // const ref = useRef(null);\n\n  //滑動的離頂端有多少距離\n  const [scrollPosition, setScrollPosition] = useState(0);\n  const sequenceLength = val(sheet.sequence.pointer.length);\n  const [ref, inView] = useInView({\n    threshold: 0 // 元素完全进入视口时触发\n  });\n\n  // const [scrollEnabled, setScrollEnabled] = useState(false);\n\n  // 透過 scrollPosition 去決定 sequence 的位置\n  // useEffect(() => {\n  //   const newPosition = (scrollPosition / 2000) * sequenceLength;\n  //   sheet.sequence.position = newPosition;\n  // }, [scrollPosition]);\n\n  const handleScroll = () => {\n    if (inView) {\n      const scrollPosition = window.pageYOffset - ref.current.offsetTop;\n      console.log('滑动位置：', scrollPosition);\n      // 在这里你可以根据滑动位置做你的逻辑处理\n    }\n  };\n\n  // 添加滚动事件监听\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Other, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PositionStarter, {\n      ref: starterRef,\n      id: \"starter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ViewBox, {\n      ref: ref,\n      children: /*#__PURE__*/_jsxDEV(TheatreContainer, {\n        id: \"theatre-container\",\n        ref: theaterRef,\n        children: /*#__PURE__*/_jsxDEV(TheatreElements, {\n          sheet: sheet\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PositionFinisher, {\n      ref: finisherRef,\n      id: \"finisher\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Other, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(ScrollDemo, \"henrs8uzPgGEKq07LQq5WhJopqo=\", false, function () {\n  return [useInView];\n});\n_c6 = ScrollDemo;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"ViewBox\");\n$RefreshReg$(_c2, \"TheatreContainer\");\n$RefreshReg$(_c3, \"PositionStarter\");\n$RefreshReg$(_c4, \"PositionFinisher\");\n$RefreshReg$(_c5, \"Other\");\n$RefreshReg$(_c6, \"ScrollDemo\");","map":{"version":3,"names":["studio","getProject","val","useState","useEffect","useRef","styled","TheatreElements","useInView","projectState","jsxDEV","_jsxDEV","Fragment","_Fragment","defaultViewportHeight","ViewBox","div","_c","TheatreContainer","_c2","PositionStarter","_c3","PositionFinisher","_c4","Other","_c5","ScrollDemo","_s","initialize","project","state","sheet","ui","hide","ready","then","sequence","pause","starterRef","finisherRef","theaterRef","scrollPosition","setScrollPosition","sequenceLength","pointer","length","ref","inView","threshold","handleScroll","window","pageYOffset","current","offsetTop","console","log","addEventListener","removeEventListener","children","fileName","_jsxFileName","lineNumber","columnNumber","id","_c6","$RefreshReg$"],"sources":["/Users/mac/Documents/GitHub/deepfake-demo/src/page/no-scroll.js"],"sourcesContent":["import studio from '@theatre/studio';\nimport { getProject, val } from '@theatre/core';\nimport { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport TheatreElements from '../components/theatre-elements';\nimport { useInView } from 'react-intersection-observer';\n\n// import { getProject, types } from '@theatre/core';\nimport projectState from '../json/state.json';\n\nconst defaultViewportHeight = '100vh';\n\nconst ViewBox = styled.div`\n  position: relative;\n  width: 100%;\n  height: 300vh;\n  min-height: 100vh;\n  outline: 3px solid blue;\n`;\n\nconst TheatreContainer = styled.div`\n  width: 100%;\n  height: 100vh;\n  outline: 1px solid red;\n  overflow-y: auto;\n  padding-right: 15px; //to hide scroll-bar\n  position: sticky;\n  top: 0;\n  left: 0;\n`;\n\n// 下面參考 scrollable-video ---------------------------------\n\n//代表滑到這個框框的最上方\nconst PositionStarter = styled.div`\n  width: 0;\n  height: 0;\n  opacity: 0;\n`;\n\nconst PositionFinisher = styled.div`\n  width: 0;\n  height: 0;\n  opacity: 0;\n`;\n\nconst Other = styled.div`\n  width: 100%;\n  height: 100vh;\n`;\n\nexport default function ScrollDemo() {\n  studio.initialize();\n  const project = getProject('deepfake demo', { state: projectState });\n  const sheet = project.sheet('Scene', 'default');\n\n  studio.ui.hide();\n  project.ready.then(() => sheet.sequence.pause);\n\n  const starterRef = useRef(null);\n  const finisherRef = useRef(null);\n  const theaterRef = useRef(null);\n  // const ref = useRef(null);\n\n  //滑動的離頂端有多少距離\n  const [scrollPosition, setScrollPosition] = useState(0);\n\n  const sequenceLength = val(sheet.sequence.pointer.length);\n\n  const [ref, inView] = useInView({\n    threshold: 0, // 元素完全进入视口时触发\n  });\n\n  // const [scrollEnabled, setScrollEnabled] = useState(false);\n\n  // 透過 scrollPosition 去決定 sequence 的位置\n  // useEffect(() => {\n  //   const newPosition = (scrollPosition / 2000) * sequenceLength;\n  //   sheet.sequence.position = newPosition;\n  // }, [scrollPosition]);\n\n  const handleScroll = () => {\n    if (inView) {\n      const scrollPosition = window.pageYOffset - ref.current.offsetTop;\n      console.log('滑动位置：', scrollPosition);\n      // 在这里你可以根据滑动位置做你的逻辑处理\n    }\n  };\n\n  // 添加滚动事件监听\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  return (\n    <>\n      <Other />\n      <PositionStarter ref={starterRef} id='starter' />\n      <ViewBox ref={ref}>\n        <TheatreContainer id='theatre-container' ref={theaterRef}>\n          <TheatreElements sheet={sheet} />\n        </TheatreContainer>\n      </ViewBox>\n      <PositionFinisher ref={finisherRef} id='finisher' />\n\n      <Other />\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}