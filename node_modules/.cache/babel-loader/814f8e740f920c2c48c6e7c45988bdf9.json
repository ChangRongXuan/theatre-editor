{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nconst noop = () => {};\nfunction createCursorLock(cursor) {\n  const el = document.createElement('div');\n  el.style.cssText = `\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 9999999;`;\n  el.style.cursor = cursor;\n  document.body.appendChild(el);\n  const relinquish = () => {\n    document.body.removeChild(el);\n  };\n  return relinquish;\n}\nexport default function useDrag(target, opts) {\n  _s();\n  const optsRef = useRef(opts);\n  optsRef.current = opts;\n  const modeRef = useRef('notDragging');\n  const stateRef = useRef({\n    dragHappened: false,\n    startPos: {\n      x: 0,\n      y: 0\n    }\n  });\n  useLayoutEffect(() => {\n    if (!target) return;\n    const getDistances = event => {\n      const {\n        startPos\n      } = stateRef.current;\n      return [event.screenX - startPos.x, event.screenY - startPos.y];\n    };\n    let relinquishCursorLock = noop;\n    const dragHandler = event => {\n      if (!stateRef.current.dragHappened && optsRef.current.lockCursorTo) {\n        relinquishCursorLock = createCursorLock(optsRef.current.lockCursorTo);\n      }\n      if (!stateRef.current.dragHappened) stateRef.current.dragHappened = true;\n      modeRef.current = 'dragging';\n      const deltas = getDistances(event);\n      optsRef.current.onDrag(deltas[0], deltas[1], event);\n    };\n    const dragEndHandler = () => {\n      removeDragListeners();\n      modeRef.current = 'notDragging';\n      optsRef.current.onDragEnd && optsRef.current.onDragEnd(stateRef.current.dragHappened);\n      relinquishCursorLock();\n      relinquishCursorLock = noop;\n    };\n    const addDragListeners = () => {\n      document.addEventListener('mousemove', dragHandler);\n      document.addEventListener('mouseup', dragEndHandler);\n    };\n    const removeDragListeners = () => {\n      document.removeEventListener('mousemove', dragHandler);\n      document.removeEventListener('mouseup', dragEndHandler);\n    };\n    const preventUnwantedClick = event => {\n      if (optsRef.current.disabled) return;\n      if (stateRef.current.dragHappened) {\n        if (!optsRef.current.dontBlockMouseDown && modeRef.current !== 'notDragging') {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n        stateRef.current.dragHappened = false;\n      }\n    };\n    const dragStartHandler = event => {\n      const opts = optsRef.current;\n      if (opts.disabled === true) return;\n      if (event.button !== 0) return;\n      const resultOfStart = opts.onDragStart && opts.onDragStart(event);\n      if (resultOfStart === false) return;\n      if (!opts.dontBlockMouseDown) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n      modeRef.current = 'dragStartCalled';\n      const {\n        screenX,\n        screenY\n      } = event;\n      stateRef.current.startPos = {\n        x: screenX,\n        y: screenY\n      };\n      stateRef.current.dragHappened = false;\n      addDragListeners();\n    };\n    const onMouseDown = e => {\n      dragStartHandler(e);\n    };\n    target.addEventListener('mousedown', onMouseDown);\n    target.addEventListener('click', preventUnwantedClick);\n    return () => {\n      removeDragListeners();\n      target.removeEventListener('mousedown', onMouseDown);\n      target.removeEventListener('click', preventUnwantedClick);\n      relinquishCursorLock();\n      if (modeRef.current !== 'notDragging') {\n        optsRef.current.onDragEnd && optsRef.current.onDragEnd(modeRef.current === 'dragging');\n      }\n      modeRef.current = 'notDragging';\n    };\n  }, [target]);\n}\n_s(useDrag, \"7qJxcxEVRclC/ALLDE98FyK8Ez0=\");","map":{"version":3,"names":["useEffect","useRef","noop","createCursorLock","cursor","el","document","createElement","style","cssText","body","appendChild","relinquish","removeChild","useDrag","target","opts","_s","optsRef","current","modeRef","stateRef","dragHappened","startPos","x","y","useLayoutEffect","getDistances","event","screenX","screenY","relinquishCursorLock","dragHandler","lockCursorTo","deltas","onDrag","dragEndHandler","removeDragListeners","onDragEnd","addDragListeners","addEventListener","removeEventListener","preventUnwantedClick","disabled","dontBlockMouseDown","stopPropagation","preventDefault","dragStartHandler","button","resultOfStart","onDragStart","onMouseDown","e"],"sources":["/Users/mac/Documents/GitHub/deepfake-demo/src/hooks/use-drag.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\nconst noop = () => {};\n\nfunction createCursorLock(cursor) {\n  const el = document.createElement('div');\n  el.style.cssText = `\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 9999999;`;\n\n  el.style.cursor = cursor;\n  document.body.appendChild(el);\n  const relinquish = () => {\n    document.body.removeChild(el);\n  };\n\n  return relinquish;\n}\n\nexport default function useDrag(target, opts) {\n  const optsRef = useRef(opts);\n  optsRef.current = opts;\n\n  const modeRef = useRef('notDragging');\n\n  const stateRef = useRef({ dragHappened: false, startPos: { x: 0, y: 0 } });\n\n  useLayoutEffect(() => {\n    if (!target) return;\n\n    const getDistances = (event) => {\n      const { startPos } = stateRef.current;\n      return [event.screenX - startPos.x, event.screenY - startPos.y];\n    };\n\n    let relinquishCursorLock = noop;\n\n    const dragHandler = (event) => {\n      if (!stateRef.current.dragHappened && optsRef.current.lockCursorTo) {\n        relinquishCursorLock = createCursorLock(optsRef.current.lockCursorTo);\n      }\n      if (!stateRef.current.dragHappened) stateRef.current.dragHappened = true;\n      modeRef.current = 'dragging';\n\n      const deltas = getDistances(event);\n      optsRef.current.onDrag(deltas[0], deltas[1], event);\n    };\n\n    const dragEndHandler = () => {\n      removeDragListeners();\n      modeRef.current = 'notDragging';\n\n      optsRef.current.onDragEnd &&\n        optsRef.current.onDragEnd(stateRef.current.dragHappened);\n      relinquishCursorLock();\n      relinquishCursorLock = noop;\n    };\n\n    const addDragListeners = () => {\n      document.addEventListener('mousemove', dragHandler);\n      document.addEventListener('mouseup', dragEndHandler);\n    };\n\n    const removeDragListeners = () => {\n      document.removeEventListener('mousemove', dragHandler);\n      document.removeEventListener('mouseup', dragEndHandler);\n    };\n\n    const preventUnwantedClick = (event) => {\n      if (optsRef.current.disabled) return;\n      if (stateRef.current.dragHappened) {\n        if (\n          !optsRef.current.dontBlockMouseDown &&\n          modeRef.current !== 'notDragging'\n        ) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n        stateRef.current.dragHappened = false;\n      }\n    };\n\n    const dragStartHandler = (event) => {\n      const opts = optsRef.current;\n      if (opts.disabled === true) return;\n\n      if (event.button !== 0) return;\n      const resultOfStart = opts.onDragStart && opts.onDragStart(event);\n\n      if (resultOfStart === false) return;\n\n      if (!opts.dontBlockMouseDown) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n\n      modeRef.current = 'dragStartCalled';\n\n      const { screenX, screenY } = event;\n      stateRef.current.startPos = { x: screenX, y: screenY };\n      stateRef.current.dragHappened = false;\n\n      addDragListeners();\n    };\n\n    const onMouseDown = (e) => {\n      dragStartHandler(e);\n    };\n\n    target.addEventListener('mousedown', onMouseDown);\n    target.addEventListener('click', preventUnwantedClick);\n\n    return () => {\n      removeDragListeners();\n      target.removeEventListener('mousedown', onMouseDown);\n      target.removeEventListener('click', preventUnwantedClick);\n      relinquishCursorLock();\n\n      if (modeRef.current !== 'notDragging') {\n        optsRef.current.onDragEnd &&\n          optsRef.current.onDragEnd(modeRef.current === 'dragging');\n      }\n      modeRef.current = 'notDragging';\n    };\n  }, [target]);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}