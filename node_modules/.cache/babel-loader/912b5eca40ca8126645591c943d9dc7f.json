{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/GitHub/deepfake-demo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/mac/Documents/GitHub/deepfake-demo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/mac/Documents/GitHub/deepfake-demo/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import{types}from'@theatre/core';import{useState,useEffect}from'react';import styled from'styled-components';import{initialConfig}from'../constants';import{jsx as _jsx}from\"react/jsx-runtime\";var TheatreContent=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100vh;\\n  position: sticky;\\n  top: 0;\\n  left: 0;\\n\"])));var FontElement=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\"])));export default function TheatreElements(_ref){var sheet=_ref.sheet;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),savedData=_useState2[0],setSavedData=_useState2[1];useEffect(function(){var elements=localStorage.getItem('theatre-data');if(elements){setSavedData(JSON.parse(elements));}},[]);useEffect(function(){if(savedData.length>0){//render font control menu\nsavedData.filter(function(item){return item.type==='font';}).forEach(function(item){var menuConfig=sheet.object(item.id,_objectSpread(_objectSpread({},initialConfig.FONT),{},{content:types.string(\"\".concat(item.content))}));var element=document.getElementById(item.id);menuConfig.onValuesChange(function(newValue){element.style.left=newValue.position.x+'%';element.style.top=newValue.position.y+'%';element.style.background=newValue.bgColor;element.style.color=newValue.font.color;element.style.opacity=newValue.opacity;element.style.padding=newValue.padding+'px';element.style.display=newValue.visible?'block':'none';element.style.width=newValue.size.width+'px';element.style.height=newValue.size.height+'px';element.style.fontSize=newValue.font.size+'px';element.style.borderRadius=newValue.border.radius+'%';element.style.border=\"\".concat(newValue.border.size,\"px solid \").concat(newValue.border.color);});});}},[savedData]);var fontElements=savedData.filter(function(data){return data.type==='font';}).map(function(data,index){return/*#__PURE__*/_jsx(FontElement,{id:data.id,children:data.content},index);});return/*#__PURE__*/_jsx(TheatreContent,{id:\"content\",children:fontElements});}","map":{"version":3,"names":["types","useState","useEffect","styled","initialConfig","jsx","_jsx","TheatreContent","div","_templateObject","_taggedTemplateLiteral","FontElement","_templateObject2","TheatreElements","_ref","sheet","_useState","_useState2","_slicedToArray","savedData","setSavedData","elements","localStorage","getItem","JSON","parse","length","filter","item","type","forEach","menuConfig","object","id","_objectSpread","FONT","content","string","concat","element","document","getElementById","onValuesChange","newValue","style","left","position","x","top","y","background","bgColor","color","font","opacity","padding","display","visible","width","size","height","fontSize","borderRadius","border","radius","fontElements","data","map","index","children"],"sources":["/Users/mac/Documents/GitHub/deepfake-demo/src/components/theatre-elements.js"],"sourcesContent":["import { types } from '@theatre/core';\nimport { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { initialConfig } from '../constants';\n\nconst TheatreContent = styled.div`\n  width: 100%;\n  height: 100vh;\n  position: sticky;\n  top: 0;\n  left: 0;\n`;\n\nconst FontElement = styled.div`\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport default function TheatreElements({ sheet }) {\n  const [savedData, setSavedData] = useState([]);\n\n  useEffect(() => {\n    const elements = localStorage.getItem('theatre-data');\n    if (elements) {\n      setSavedData(JSON.parse(elements));\n    }\n  }, []);\n\n  useEffect(() => {\n    if (savedData.length > 0) {\n      //render font control menu\n      savedData\n        .filter((item) => item.type === 'font')\n        .forEach((item) => {\n          const menuConfig = sheet.object(item.id, {\n            ...initialConfig.FONT,\n            content: types.string(`${item.content}`),\n          });\n          const element = document.getElementById(item.id);\n\n          menuConfig.onValuesChange((newValue) => {\n            element.style.left = newValue.position.x + '%';\n            element.style.top = newValue.position.y + '%';\n            element.style.background = newValue.bgColor;\n            element.style.color = newValue.font.color;\n            element.style.opacity = newValue.opacity;\n            element.style.padding = newValue.padding + 'px';\n            element.style.display = newValue.visible ? 'block' : 'none';\n            element.style.width = newValue.size.width + 'px';\n            element.style.height = newValue.size.height + 'px';\n            element.style.fontSize = newValue.font.size + 'px';\n            element.style.borderRadius = newValue.border.radius + '%';\n            element.style.border = `${newValue.border.size}px solid ${newValue.border.color}`;\n          });\n        });\n    }\n  }, [savedData]);\n\n  const fontElements = savedData\n    .filter((data) => data.type === 'font')\n    .map((data, index) => {\n      return (\n        <FontElement key={index} id={data.id}>\n          {data.content}\n        </FontElement>\n      );\n    });\n\n  return <TheatreContent id='content'>{fontElements}</TheatreContent>;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}